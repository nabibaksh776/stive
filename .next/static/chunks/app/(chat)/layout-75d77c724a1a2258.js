(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[283],{7605:(e,t,s)=>{Promise.resolve().then(s.bind(s,8745)),Promise.resolve().then(s.bind(s,6359))},8745:(e,t,s)=>{"use strict";s.d(t,{AppSidebar:()=>P});var a=s(6705),r=s(6463),l=s(2941),d=s(71),n=s(4271),i=s(5979),o=s(4872),c=s(7138),x=s(955),m=s(7776),f=s(9039),h=s(6669),u=s(7440),p=s(495);let j=h.fC;h.xz;let g=h.h_,y=x.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(h.aV,{className:(0,u.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...r,ref:t})});y.displayName=h.aV.displayName;let N=x.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsxs)(g,{children:[(0,a.jsx)(y,{}),(0,a.jsx)(h.VY,{ref:t,className:(0,u.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...r})]})});N.displayName=h.VY.displayName;let v=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,u.cn)("flex flex-col space-y-2 text-center sm:text-left",t),...s})};v.displayName="AlertDialogHeader";let b=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,u.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...s})};b.displayName="AlertDialogFooter";let w=x.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(h.Dx,{ref:t,className:(0,u.cn)("text-lg font-semibold",s),...r})});w.displayName=h.Dx.displayName;let k=x.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(h.dk,{ref:t,className:(0,u.cn)("text-sm text-muted-foreground",s),...r})});k.displayName=h.dk.displayName;let z=x.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(h.aU,{ref:t,className:(0,u.cn)((0,p.d)(),s),...r})});z.displayName=h.aU.displayName;let C=x.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(h.$j,{ref:t,className:(0,u.cn)((0,p.d)({variant:"outline"}),"mt-2 sm:mt-0",s),...r})});C.displayName=h.$j.displayName;var R=s(1390),D=s(7592),A=s(2468),_=s(8165);let O=R.fC,F=R.xz;R.ZA,R.Uv,R.Tr,R.Ee,x.forwardRef((e,t)=>{let{className:s,inset:r,children:l,...d}=e;return(0,a.jsxs)(R.fF,{ref:t,className:(0,u.cn)("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",r&&"pl-8",s),...d,children:[l,(0,a.jsx)(D.Z,{className:"ml-auto h-4 w-4"})]})}).displayName=R.fF.displayName,x.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(R.tu,{ref:t,className:(0,u.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...r})}).displayName=R.tu.displayName;let M=x.forwardRef((e,t)=>{let{className:s,sideOffset:r=4,...l}=e;return(0,a.jsx)(R.Uv,{children:(0,a.jsx)(R.VY,{ref:t,sideOffset:r,className:(0,u.cn)("z-50 min-w-[8rem] overflow-hidden rounded-lg border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...l})})});M.displayName=R.VY.displayName;let Z=x.forwardRef((e,t)=>{let{className:s,inset:r,...l}=e;return(0,a.jsx)(R.ck,{ref:t,className:(0,u.cn)("relative flex gap-2 cursor-default select-none items-center rounded-md px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",r&&"pl-8",s),...l})});Z.displayName=R.ck.displayName,x.forwardRef((e,t)=>{let{className:s,children:r,checked:l,...d}=e;return(0,a.jsxs)(R.oC,{ref:t,className:(0,u.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),checked:l,...d,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(R.wU,{children:(0,a.jsx)(A.Z,{className:"h-4 w-4"})})}),r]})}).displayName=R.oC.displayName,x.forwardRef((e,t)=>{let{className:s,children:r,...l}=e;return(0,a.jsxs)(R.Rk,{ref:t,className:(0,u.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...l,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(R.wU,{children:(0,a.jsx)(_.Z,{className:"h-2 w-2 fill-current"})})}),r]})}).displayName=R.Rk.displayName,x.forwardRef((e,t)=>{let{className:s,inset:r,...l}=e;return(0,a.jsx)(R.__,{ref:t,className:(0,u.cn)("px-2 py-1.5 text-sm font-semibold",r&&"pl-8",s),...l})}).displayName=R.__.displayName;let E=x.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(R.Z0,{ref:t,className:(0,u.cn)("-mx-1 my-1 h-px bg-muted",s),...r})});E.displayName=R.Z0.displayName;var H=s(6359);let T=e=>{let{chat:t,isActive:s,onDelete:r,setOpenMobile:d}=e;return(0,a.jsxs)(H.LO,{children:[(0,a.jsx)(H.bb,{asChild:!0,isActive:s,children:(0,a.jsx)(c.default,{href:"/chat/".concat(t.id),onClick:()=>d(!1),children:(0,a.jsx)("span",{children:t.title})})}),(0,a.jsxs)(O,{modal:!0,children:[(0,a.jsx)(F,{asChild:!0,children:(0,a.jsxs)(H.gU,{className:"data-[state=open]:bg-sidebar-accent data-[state=open]:text-sidebar-accent-foreground mr-0.5",showOnHover:!s,children:[(0,a.jsx)(l.xh,{}),(0,a.jsx)("span",{className:"sr-only",children:"More"})]})}),(0,a.jsx)(M,{side:"bottom",align:"end",children:(0,a.jsxs)(Z,{className:"cursor-pointer text-destructive focus:bg-destructive/15 focus:text-destructive dark:text-red-500",onSelect:()=>r(t.id),children:[(0,a.jsx)(l.XH,{}),(0,a.jsx)("span",{children:"Delete"})]})})]})]})};function U(e){let{user:t}=e,{setOpenMobile:s}=(0,H.Ap)(),{id:l}=(0,r.useParams)(),c=(0,r.usePathname)(),{data:h,isLoading:p,mutate:g}=(0,f.ZP)(t?"/api/history":null,u._i,{fallbackData:[]});(0,x.useEffect)(()=>{g()},[c,g]);let[y,R]=(0,x.useState)(null),[D,A]=(0,x.useState)(!1),_=(0,r.useRouter)(),O=async()=>{let e=fetch("/api/chat?id=".concat(y),{method:"DELETE"});m.A.promise(e,{loading:"Deleting chat...",success:()=>(g(e=>{if(e)return e.filter(e=>e.id!==l)}),"any deleted successfully"),error:"Failed to delete chat"}),A(!1),y===l&&_.push("/")};if(!t)return(0,a.jsx)(H.Hz,{children:(0,a.jsx)(H.Ks,{children:(0,a.jsx)("div",{className:"text-zinc-500 w-full flex flex-row justify-center items-center text-sm gap-2",children:(0,a.jsx)("div",{children:"Login to save and revisit previous chats!"})})})});if(p)return(0,a.jsxs)(H.Hz,{children:[(0,a.jsx)("div",{className:"px-2 py-1 text-xs text-sidebar-foreground/50",children:"Today"}),(0,a.jsx)(H.Ks,{children:(0,a.jsx)("div",{className:"flex flex-col",children:[44,32,28,64,52].map(e=>(0,a.jsx)("div",{className:"rounded-md h-8 flex gap-2 px-2 items-center",children:(0,a.jsx)("div",{className:"h-4 rounded-md flex-1 max-w-[--skeleton-width] bg-sidebar-accent-foreground/10",style:{"--skeleton-width":"".concat(e,"%")}})},e))})})]});if((null==h?void 0:h.length)===0)return(0,a.jsx)(H.Hz,{children:(0,a.jsx)(H.Ks,{children:(0,a.jsx)("div",{className:"text-zinc-500 w-full flex flex-row justify-center items-center text-sm gap-2",children:(0,a.jsx)("div",{children:"Your conversations will appear here once you start chatting!"})})})});let F=e=>{let t=new Date,s=(0,d.t)(t,1),a=(0,n.W)(t,1);return e.reduce((e,t)=>{let r=new Date(t.createdAt);return(0,i.z)(r)?e.today.push(t):(0,o.g)(r)?e.yesterday.push(t):r>s?e.lastWeek.push(t):r>a?e.lastMonth.push(t):e.older.push(t),e},{today:[],yesterday:[],lastWeek:[],lastMonth:[],older:[]})};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(H.Hz,{children:(0,a.jsx)(H.Ks,{children:(0,a.jsx)(H.w3,{children:h&&(()=>{let e=F(h);return(0,a.jsxs)(a.Fragment,{children:[e.today.length>0&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"px-2 py-1 text-xs text-sidebar-foreground/50",children:"Today"}),e.today.map(e=>(0,a.jsx)(T,{chat:e,isActive:e.id===l,onDelete:e=>{R(e),A(!0)},setOpenMobile:s},e.id))]}),e.yesterday.length>0&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"px-2 py-1 text-xs text-sidebar-foreground/50 mt-6",children:"Yesterday"}),e.yesterday.map(e=>(0,a.jsx)(T,{chat:e,isActive:e.id===l,onDelete:e=>{R(e),A(!0)},setOpenMobile:s},e.id))]}),e.lastWeek.length>0&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"px-2 py-1 text-xs text-sidebar-foreground/50 mt-6",children:"Last 7 days"}),e.lastWeek.map(e=>(0,a.jsx)(T,{chat:e,isActive:e.id===l,onDelete:e=>{R(e),A(!0)},setOpenMobile:s},e.id))]}),e.lastMonth.length>0&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"px-2 py-1 text-xs text-sidebar-foreground/50 mt-6",children:"Last 30 days"}),e.lastMonth.map(e=>(0,a.jsx)(T,{chat:e,isActive:e.id===l,onDelete:e=>{R(e),A(!0)},setOpenMobile:s},e.id))]}),e.older.length>0&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"px-2 py-1 text-xs text-sidebar-foreground/50 mt-6",children:"Older"}),e.older.map(e=>(0,a.jsx)(T,{chat:e,isActive:e.id===l,onDelete:e=>{R(e),A(!0)},setOpenMobile:s},e.id))]})]})})()})})}),(0,a.jsx)(j,{open:D,onOpenChange:A,children:(0,a.jsxs)(N,{children:[(0,a.jsxs)(v,{children:[(0,a.jsx)(w,{children:"Are you absolutely sure?"}),(0,a.jsx)(k,{children:"This action cannot be undone. This will permanently delete your chat and remove it from our servers."})]}),(0,a.jsxs)(b,{children:[(0,a.jsx)(C,{children:"Cancel"}),(0,a.jsx)(z,{onClick:O,children:"Continue"})]})]})})]})}var L=s(4392),V=s(6648),W=s(9512);function Y(e){var t;let{user:s}=e,{setTheme:r,theme:l}=(0,W.F)();return(0,a.jsx)(H.w3,{children:(0,a.jsx)(H.LO,{children:(0,a.jsxs)(O,{children:[(0,a.jsx)(F,{asChild:!0,children:(0,a.jsxs)(H.bb,{className:"data-[state=open]:bg-sidebar-accent bg-background data-[state=open]:text-sidebar-accent-foreground h-10",children:[(0,a.jsx)(V.default,{src:"https://avatar.vercel.sh/".concat(s.email),alt:null!==(t=s.email)&&void 0!==t?t:"User Avatar",width:24,height:24,className:"rounded-full"}),(0,a.jsx)("span",{className:"truncate",children:null==s?void 0:s.email}),(0,a.jsx)(L.Z,{className:"ml-auto"})]})}),(0,a.jsxs)(M,{side:"top",className:"w-[--radix-popper-anchor-width]",children:[(0,a.jsx)(Z,{className:"cursor-pointer",onSelect:()=>r("dark"===l?"light":"dark"),children:"Toggle ".concat("light"===l?"dark":"light"," mode")}),(0,a.jsx)(E,{}),(0,a.jsx)(Z,{asChild:!0})]})]})})})}var K=s(9666);function P(e){let{user:t}=e,s=(0,r.useRouter)(),{setOpenMobile:d}=(0,H.Ap)();return(0,a.jsxs)(H.DD,{className:"group-data-[side=left]:border-r-0",children:[(0,a.jsx)(H.$l,{children:(0,a.jsx)(H.w3,{children:(0,a.jsxs)("div",{className:"flex flex-row justify-between items-center",children:[(0,a.jsx)("div",{onClick:()=>{d(!1),s.push("/"),s.refresh()},className:"flex flex-row gap-3 items-center",children:(0,a.jsx)("span",{className:"text-lg font-semibold px-2 hover:bg-muted rounded-md cursor-pointer",children:"Chatbot"})}),(0,a.jsx)(K.El,{content:"New Chat",align:"start",children:(0,a.jsx)(p.z,{variant:"ghost",className:"p-2 h-fit",onClick:()=>{d(!1),s.push("/"),s.refresh()},children:(0,a.jsx)(l.pO,{})})})]})})}),(0,a.jsx)(H.TZ,{children:(0,a.jsx)(H.Hz,{children:(0,a.jsx)(U,{user:t})})}),(0,a.jsx)(H.ZW,{className:"gap-0",children:t&&(0,a.jsx)(H.Hz,{children:(0,a.jsx)(H.Ks,{children:(0,a.jsx)(Y,{user:t})})})})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[776,342,850,383,539,322,744],()=>t(7605)),_N_E=e.O()}]);